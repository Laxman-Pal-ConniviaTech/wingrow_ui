{"version":3,"file":"static/js/325.3105c09e.chunk.js","mappings":"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","sources":["Routes/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport TextField from \"@mui/material/TextField\";\nimport Typography from \"@mui/material/Typography\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport AuthService from \"../services/auth.service\";\nimport Spinner from \"../components/Spinner\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst user = AuthService.getCurrentUser();\n\nexport default function SignIn() {\n  useEffect(() => {\n    if (!!user) {\n      AuthService.logout();\n      window.location.reload();\n    }\n  }, []);\n\n  const navigate = useNavigate();\n  const [Loading, setLoading] = useState(false);\n  const [data, setData] = useState({\n    phone: \"\",\n    password: \"\",\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n\n    setData((prev) => {\n      return {\n        ...prev,\n        [name]: value,\n      };\n    });\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n    if (data.password && data.phone) {\n      setLoading(true);\n      AuthService.login(data.phone, data.password).then(\n        (res) => {\n          if (res.role === \"farmer\") {\n            toast.success(\"Login successful!\", {\n              position: \"top-center\",\n              autoClose: 3000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true,\n              progress: undefined,\n              theme: \"light\",\n            });\n            setTimeout(() => {\n              navigate(\"/farmers\");\n              window.location.reload();\n            }, 1000);\n          }\n          if (res.role === \"admin\") {\n            toast.success(\"Login successful!\", {\n              position: \"top-center\",\n              autoClose: 3000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true,\n              progress: undefined,\n              theme: \"light\",\n            });\n            setTimeout(() => {\n              navigate(\"/admin\");\n              window.location.reload();\n            }, 1000);\n          }\n          if (res.role === \"customer\") {\n            toast.success(\"Login successful!\", {\n              position: \"top-center\",\n              autoClose: 3000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true,\n              progress: undefined,\n              theme: \"light\",\n            });\n            setTimeout(() => {\n              navigate(\"/customers\");\n              window.location.reload();\n            }, 1000);\n          }\n          setLoading(false);\n        },\n        (error) => {\n          toast.warn(\"Login failed\", {\n            position: \"top-center\",\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n            theme: \"light\",\n          });\n          setData({\n            phone: \"\",\n            password: \"\",\n          });\n          setLoading(false);\n        }\n      );\n    } else {\n      toast.warn(\"data invalid\", {\n        position: \"top-center\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n        theme: \"light\",\n      });\n    }\n  };\n\n  return (\n    <div className=\"authContainer\">\n      <ToastContainer\n        position=\"top-right\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop={false}\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        draggable\n        pauseOnHover\n        theme=\"light\"\n      />\n      {/* Same as */}\n      <ToastContainer />\n      {!Loading ? (\n        <div className=\"authbox\">\n          <img\n            className=\"login_image\"\n            src=\"./images/slidestall2.webp\"\n            alt=\"logo\"\n          />\n          <form onSubmit={handleLogin} className=\"login_details\">\n            {/* <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\n              </Avatar> */}\n            <img className=\"form-logo\" src=\"./logo.png\" alt=\"form-logo\" />\n            <Typography component=\"h1\" variant=\"h5\">\n              Welcome to Wingrowagritech\n            </Typography>\n            <Typography mt={2} component=\"h1\" variant=\"h5\">\n              Login here.\n            </Typography>\n            <TextField\n              inputlabelprops={{\n                style: { fontSize: 16, fontFamily: \"monospace\" },\n              }}\n              margin=\"normal\"\n              required\n              fullWidth\n              id=\"phone\"\n              label=\"Mobile Number\"\n              name=\"phone\"\n              value={data.phone}\n              autoComplete=\"phone\"\n              autoFocus\n              color=\"success\"\n              className=\"textfield\"\n              onChange={handleChange}\n            />\n            <TextField\n              inputlabelprops={{\n                style: { fontSize: 16, fontFamily: \"monospace\" },\n              }}\n              margin=\"normal\"\n              required\n              fullWidth\n              name=\"password\"\n              label=\"Password\"\n              value={data.password}\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              color=\"success\"\n              className=\"textfield\"\n              onChange={handleChange}\n            />\n            <Link className=\"form-link\" to={\"/Forgot\"} variant=\"body2\">\n              Forgot your password?\n            </Link>\n            <Button\n              className=\"form-btn\"\n              type=\"submit\"\n              color=\"success\"\n              variant=\"contained\"\n              size=\"large\"\n              sx={{ mt: 3, mb: 2 }}\n            >\n              Login\n            </Button>\n            <Typography className=\"form-link\" mt={2}>\n              New to Wingrow? \n               <Link to=\"/Register\" variant=\"body2\" className=\"form-link signupWithUs\">\n                 Signup with us\n              </Link>\n            </Typography>\n          </form>\n        </div>\n      ) : (\n        <Spinner />\n      )}\n    </div>\n  );\n}\n"],"names":["user","AuthService","SignIn","useEffect","window","location","reload","navigate","useNavigate","useState","Loading","setLoading","phone","password","data","setData","handleChange","e","target","name","value","prev","className","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","theme","src","alt","onSubmit","preventDefault","then","res","role","toast","progress","undefined","setTimeout","error","component","variant","mt","inputlabelprops","style","fontSize","fontFamily","margin","required","fullWidth","id","label","autoComplete","autoFocus","color","onChange","type","to","size","sx","mb"],"sourceRoot":""}